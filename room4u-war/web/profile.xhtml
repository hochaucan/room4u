<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <body>

        <ui:composition template="./template/Room4uTemplate.xhtml">
            <script type="text/javascript">
                $(document).ready(function () {
                    //             alert("#{customerBean.curCust.custName}");
                    var barChartData1 = {
                        labels: ["January", "February", "March", "April", "May", "June", "July"],
                        datasets: [
                            {
                                fillColor: "rgba(220,220,220,0.5)",
                                strokeColor: "rgba(220,220,220,1)",
                                data: [65, 59, 90, 81, 56, 55, 40]
                            },
                            {
                                fillColor: "rgba(151,187,205,0.5)",
                                strokeColor: "rgba(151,187,205,1)",
                                data: [28, 48, 40, 19, 96, 27, 100]
                            }
                            ,
                            {
                                fillColor: "rgba(255,187,205,0.5)",
                                strokeColor: "rgba(151,187,205,1)",
                                data: [128, 48, 40, 19, 96, 27, 100]
                            }
                        ]

                    };
                    new Chart(document.getElementById("bar1").getContext("2d")).Bar(barChartData1);
                });
            </script>
            <ui:define name="title">
                Thông tin cá nhân.
            </ui:define>

            <ui:define name="content">
                <div class="row" style="margin-top: 0px">
                    <div class="col-md-3">
                        <div class="list-group">
                            <div class="panel panel-default">
                                <div class="panel-heading profileImage" >
                                    <h:graphicImage value="/images/#{customerBean.curCust.images}"/><br/>
                                    <h:outputLabel value="#{customerBean.curCust.custName}" /><br/>
                                    <span style="font-size: 12px;color:#8F8F8F">Đăng ký ngày 
                                        <h:outputText value="#{customerBean.curCust.registerDate}">
                                            <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                        </h:outputText>                                      

                                    </span>
                                </div>
                                <div class="panel-body profileSidebarMenu">
                                    <a href="#personalInfo" class="list-group-item active" data-toggle="tab" aria-expanded="false">
                                        <span class="glyphicon glyphicon-hand-right"></span>Thông tin cá nhân
                                    </a>
                                    <a href="#personalPass" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                        <span class="glyphicon glyphicon-hand-right"></span>Đổi mật khẩu
                                    </a>
                                    <a href="#orderedRoom" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                        <span class="glyphicon glyphicon-hand-right"></span>Bạn đặt phòng
                                    </a>
                                    <a href="#yourRequiredRoom" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                        <span class="glyphicon glyphicon-hand-right"></span>Đăng ký phòng
                                    </a>
                                    <h:panelGroup rendered="#{customerBean.curCust.roleId.roleId ==2}">
                                        <a href="#yourPostedRoom" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                            <span class="glyphicon glyphicon-hand-right"></span>Phòng của bạn
                                        </a>
                                        <a href="#yourCustomerOrder" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                            <span class="glyphicon glyphicon-hand-right"></span>Khách hàng đặt phòng
                                        </a>
                                        <a href="#yourComment" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                            <span class="glyphicon glyphicon-hand-right"></span>Bình luận
                                        </a>
                                        <a href="#yourReport" class="list-group-item" data-toggle="tab" aria-expanded="false">
                                            <span class="glyphicon glyphicon-hand-right"></span>Báo cáo
                                        </a>
                                    </h:panelGroup>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <!--Tab personal Info-->
                                <div class="tab-pane fade active in" id="personalInfo">
                                    <legend>Thông tin cá nhân</legend>
                                    <h:form id="frmUserUpdate" class="form-horizontal" enctype="multipart/form-data" >
                                        <div class="modal-body">
                                            <fieldset>
                                                <div class="form-group">
                                                    <label for="txtCustName" class="col-lg-3 control-label">Tên bạn</label>
                                                    <div class="col-lg-9">
                                                        <h:inputText value="#{customerBean.curCust.custName}" id="txtCustName" class="form-control" />
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="txtCustAccount" class="col-lg-3 control-label">Tên đăng nhập</label>
                                                    <div class="col-lg-9">
                                                        <h:inputText id="txtCustAccount" autocomplete="false"  value="#{customerBean.curCust.accountCustomer}" class="form-control" />
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label for="txtCustEmail" class="col-lg-3 control-label">Email</label>
                                                    <div class="col-lg-9">
                                                        <h:inputText id="txtCustEmail"  value="#{customerBean.curCust.email}" class="form-control" />
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="txtCustPhone" class="col-lg-3 control-label">Điện thoại</label>
                                                    <div class="col-lg-9">
                                                        <h:inputText id="txtCustPhone"  value="#{customerBean.curCust.phone}" class="form-control" />
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label for="role" class="col-lg-3 control-label">Vai trò</label>
                                                    <div class="col-lg-9">
                                                    <!--<h:inputText id="role"  value="#{customerBean.roleId}" class="form-control" />-->
                                                        <h:selectOneMenu value="#{customerBean.currentRoleID}" class="">
                                                            <f:selectItem itemValue="2" itemLabel="Người cho thuê" />
                                                            <f:selectItem itemValue="3" itemLabel="Người cần thuê" />
                                                        </h:selectOneMenu>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="inputImage" class="col-lg-3 control-label">Hình đại diện</label>
                                                    <!--<input type="file" id="fileinput" multiple="multiple" accept="image/*" />-->
                                                    <div class="col-lg-9">
                                                        <h:inputFile id="fileCustThumbnail" value="#{customerBean.curCust.images}"></h:inputFile>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>
                                        <div class="modal-footer">
                                            <!--                                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>-->
                                            <h:commandButton action="#{customerBean.edit()}"  class="btn btn-primary" value="Cập nhật"/>
                                        </div>
                                    </h:form>


                                </div>
                                <!--Tab change password-->
                                <div class="tab-pane fade active " id="personalPass">
                                    <h:form id="frmChangePassword" class="form-horizontal">

                                        <legend>Đổi mật khẩu</legend>
                                        <fieldset>

                                            <div class="form-group">
                                                <label for="txtCurentPass" class="col-lg-3 control-label">Mật khẩu hiện tại</label>
                                                <div class="col-lg-9">
                                                    <h:inputSecret id="txtCurentPass" value="#{customerBean.oldPassword}" class="form-control" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="txtNewPass" class="col-lg-3 control-label">Mật khẩu mới</label>
                                                <div class="col-lg-9">
                                                    <h:inputSecret id="txtNewPass" value="#{customerBean.newPassword}" class="form-control" />
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="txtConfirmNewPass" class="col-lg-3 control-label">Xác nhận mật khẩu mới</label>
                                                <div class="col-lg-9">
                                                    <h:inputSecret id="txtConfirmNewPass" value="#{customerBean.confirmPassword}" class="form-control"  />
                                                </div>
                                            </div>
                                        </fieldset>

                                        <div class="modal-footer" style="text-align: right">
                                            <!--<button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>-->
                                            <h:commandButton class="btn btn-primary" action="#{customerBean.changePassword()}" value="Đổi mật khẩu"/>
                                        </div>
                                    </h:form>
                                </div>
                                <!--Tab Ordered Room-->
                                <div class="tab-pane fade active " id="orderedRoom">
                                    <legend>Danh sách bạn đặt phòng</legend>
                                    <h:panelGroup id="pgDeleteRoomOrder">
                                        <table class="table table-responsive table-hover ">
                                            <thead>
                                                <tr>
                                                    <th>Số hóa đơn</th>
                                                    <th>Tổng giá</th>
                                                    <th>Ngày đặt</th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                <ui:repeat var="roomOrder" value="#{landlord.displayOrderRoomByUser()}">
                                                    <h:panelGroup rendered="#{roomOrder.status != 'Đã xóa'}">
                                                        <tr>
                                                            <td>#{roomOrder.orderId}</td>
                                                            <td class="thousandComma">#{roomOrder.totalPrice}</td>
                                                            <td>
                                                                <h:outputText value="#{roomOrder.orderDate}">
                                                                    <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                                                </h:outputText>    
                                                            </td>

                                                            <td>
                                                                <a  class="btn btn-primary" data-toggle="modal" data-target="#roomOrderView" ><span class="glyphicon glyphicon-eye-open"></span>Xem</a>
                                                            </td>
                                                            <td>
                                                                <a  class="btn btn-primary" onclick="assignDeletedRoomOrderId(this)"  data-toggle="modal" data-target="#roomOrderDelete" ><span class="glyphicon glyphicon-trash"></span>Xóa</a>
                                                            </td>

                                                        </tr>
                                                    </h:panelGroup>
                                                </ui:repeat>
                                            </tbody>
                                        </table> 
                                    </h:panelGroup>
                                </div>
                                <!--Tab Registered Room-->
                                <div class="tab-pane fade active " id="yourRequiredRoom">
                                    <legend>Danh sách đăng ký phòng</legend>
                                    <f:view>
                                        <h:form>
                                            <h:dataTable value="#{custReq.requiresByCusID}" var="item" class="table table-responsive table-hover">
                                                <h:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Số đăng ký"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.custReqId}"/>
                                                </h:column>
                                                <h:column>
                                                    <h:inputHidden id="hdaddress" value="#{custReq.getAddress(item.requirement)}"/>
                                                    <f:facet name="header">
                                                        <h:outputText value="Địa chỉ đăng ký"/>
                                                    </f:facet>
                                                    <h:outputText id="txtAddress" value="#{custReq.getaddress}"/>
                                                </h:column>
                                                <h:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Bán kính"/>
                                                    </f:facet>
                                                    <h:outputText id="txtRadius" value="#{custReq.getrad}"/>
                                                </h:column>
                                                <h:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Ngày đăng ký"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.createdDate}">
                                                        <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                                    </h:outputText>
                                                </h:column>
                                                <h:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Xóa"/>
                                                    </f:facet>
                                                    <a class="btn btn-primary" onclick="displayReqDelete(this)"  data-toggle="modal" data-target="#DeleteReq"><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                </h:column>
                                            </h:dataTable>
                                        </h:form>
                                    </f:view>
                                </div>
                                <!--Tab Posted Room-->
                                <div class="tab-pane fade active " id="yourPostedRoom">
                                    <h:form id="frmUpdateAccom">
                                        <legend>Danh sách phòng của bạn</legend>
                                        <!--<h:panelGroup id="pgDeleteRoom">-->
                                        <table class="table table-responsive table-hover ">
                                            <thead>
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Hình</th>
                                                    <th>Tên phòng</th>
                                                    <th>Địa chỉ</th>
                                                    <th>Ngày đăng</th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                <h:outputText id="txtUpdateRoomResult" value="#{landlord.updateRoomResult}" />
                                                <ui:repeat var="room" value="#{landlord.displayRoomProfile()}" varStatus="status">
                                                    <tr>
                                                        <td>#{room.accomId}</td>
                                                        <td>
                                                            <h:outputText value="#{landlord.displayRoomImages(room.images)}"/>
                                                            <img style="width: 60px" src="/room4u-war/images/#{landlord.curThumbnail}" alt=""/>
                                                        </td>
                                                        <td>#{room.accomName}</td>
                                                        <td>#{room.address}</td>
                                                        <td>
                                                            <h:outputText value="#{room.createdDate}">
                                                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                                            </h:outputText>
                                                        </td>
                                                        <td>
                                                            <!--<a class="btn btn-primary"  data-toggle="modal" data-target="#customerEdit" ><span class="glyphicon glyphicon-pencil"></span> Sửa</a>-->
                                                            <!--<h:inputText id="txtUpdatedAccomId"  style="display: none"/>-->

                                                            <h:commandButton class="btn btn-primary" value="Sửa">
                                                                <!--<span class="glyphicon glyphicon-pencil"></span>-->
                                                                
                                                                <f:ajax execute="@form" render="@form" listener ="#{landlord.displayAccomUpdate(room)}" onevent="updateAccomSuccess" />
                                                            </h:commandButton>



                                                        </td>
                                                        <td>
                                                            <a class="btn btn-primary" onclick="assignDeletedAccomId(this)"  data-toggle="modal" data-target="#roomDelete" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                        </td>
                                                    </tr>
                                                </ui:repeat>

                                            </tbody>

                                        </table> 
                                    </h:form>
                                    <!--</h:panelGroup>-->
                                </div>
                                <!--Tab Customer Order-->
                                <div class="tab-pane fade active " id="yourCustomerOrder">
                                    <legend>Danh sách Hóa Đơn</legend>
                                    <h:panelGroup id="pgDeleteCustomerOrderRoom">
                                        <table class="table table-responsive table-hover ">
                                            <thead>
                                                <tr>
                                                    <th>Số hóa đơn</th>
                                                    <th>Tổng giá</th>
                                                    <th>Ngày đặt</th>
                                                    <th>Tình trạng</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <ui:repeat var="roomOrder" value="#{landlord.displayOrderRoomByUser()}">

                                                    <tr>
                                                        <td>#{roomOrder.orderId}</td>
                                                        <td class="thousandComma">#{roomOrder.totalPrice}</td>
                                                        <td>
                                                            <h:outputText value="#{roomOrder.orderDate}">
                                                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                                            </h:outputText>
                                                        </td>
                                                        <td>#{roomOrder.status}</td>
                                                        <td>
                                                            <a  class="btn btn-primary" data-toggle="modal" data-target="#roomOrderView" ><span class="glyphicon glyphicon-eye-open"></span></a>
                                                        </td>
                                                        <td>
                                                            <a  class="btn btn-primary" onclick="assignDeletedCustomerOrderId(this)"  data-toggle="modal" data-target="#roomCustomerOrderDelete" ><span class="glyphicon glyphicon-trash"></span></a>
                                                        </td>

                                                    </tr>

                                                </ui:repeat>
                                            </tbody>
                                        </table> 
                                    </h:panelGroup>
                                </div>
                                <!--Tab Comment-->
                                <div class="tab-pane fade active " id="yourComment">
                                    <h:form id="frmUpdateCom">
                                        <!--<h:panelGroup id="refeshCom">-->
                                        <legend>Bình luận</legend>
                                        <table class="table table-responsive table-hover ">
                                            <thead>
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Khách hàng</th>
                                                    <th>Tên phòng</th>
                                                    <th>Nội dung</th>
                                                    <th>Ngày đăng</th>
                                                    <th>Trả lời</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                                <ui:repeat var="com" value="#{landlord.displayCommentsByUser()}" varStatus="status">
                                                    <tr>
                                                        <td>#{com.comId}</td>
                                                        <td>#{com.custId.custName}</td>
                                                        <td>#{com.accomId.accomName}</td>
                                                        <td>#{com.content}</td>
                                                        <td>#{com.comDate}</td>
                                                        <td> <h:inputText value="#{com.answer}"/></td>
                                                        <td>
                                                            <h:commandLink class="btn btn-primary" action="#{landlord.updateComment(com)}"  >
                                                                <span class="glyphicon glyphicon-pencil"></span> 
                                                                Cập nhật
                                                                <f:ajax execute="@form" render="@form"/>
                                                            </h:commandLink>
                                                        </td>
                                                        <td>
                                                            <a class="btn btn-primary" onclick="assignDeletedComment(this)"  data-toggle="modal" data-target="#mdDeleteCom" ><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                                        </td>
                                                    </tr>
                                                </ui:repeat>

                                            </tbody>
                                        </table> 
                                        <!--</h:panelGroup>-->
                                    </h:form>
                                </div>
                                <!--Tab Report-->
                                <div class="tab-pane fade active " id="yourReport">
                                    <legend>Báo cáo</legend>
                                    <!--<img src="./resources/images/r2.jpg"/>-->
                                    <div class="col-lg-6">
                                        <section class="panel">
                                            <header class="panel-heading">
                                                Bar
                                            </header>
                                            <div class="panel-body text-center">
                                                <canvas id="bar1" height="300" width="500"></canvas>
                                            </div>
                                        </section>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--Modal Comment delete-->
                <div class="modal fade" id="mdDeleteCom" tabindex="-1" role="dialog" aria-labelledby="myDelete" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <h:form id="frmDeletedCom" class="form-horizontal">
                                <h:inputText id="txtDeletedComId" value="#{landlord.deletedComId}" style="display: none"/>
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title custom_align" id="Heading">Xóa bình luận</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="alert alert-warning"><span class="glyphicon glyphicon-warning-sign"></span> Bạn có chắc chắn xóa bình luận này?</div>
                                </div>
                                <div class="modal-footer " style="text-align: right">

                                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Hủy</button>

                                    <h:commandLink class="btn btn-primary"  >
                                        <i class="glyphicon glyphicon-ok-sign"/>
                                        Xác nhận
                                        <f:ajax execute="@form" render="frmUpdateCom txtDeletedComResult" listener="#{landlord.deleteComment()}" onevent="deleteComSuccess"/>
                                    </h:commandLink>
                                    <h:outputText id="txtDeletedComResult" value="#{landlord.deletedComResult}"  style="display: none" />
                                </div>
                            </h:form>
                        </div>
                        <!-- /.modal-content --> 
                    </div>
                    <!-- /.modal-dialog --> 
                </div>

                <!--Modal Order Room delete-->
                <div class="modal fade" id="roomOrderDelete" tabindex="-1" role="dialog" aria-labelledby="myDelete" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <h:form id="frmDeletedRoomOrder" class="form-horizontal">
                                <h:inputText id="txtDeletedRoomOrderId" value="#{landlord.deletedRoomOrderId}" style="display: none"/>
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title custom_align" id="Heading">Xóa thông tin Hóa Đơn</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="alert alert-warning"><span class="glyphicon glyphicon-warning-sign"></span> Bạn có chắc chắn xóa hóa đơn này?</div>
                                </div>
                                <div class="modal-footer " style="text-align: right">

                                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Hủy</button>

                                    <h:commandLink class="btn btn-primary"  >
                                        <i class="glyphicon glyphicon-ok-sign"/>
                                        Xác nhận
                                        <f:ajax execute="@form" render="pgDeleteRoomOrder pgDeleteCustomerOrderRoom txtDeletedRoomOrderResult" listener="#{landlord.deleteRoomOrder()}" onevent="deleteRoomOrderSuccess"/>
                                    </h:commandLink>
                                    <h:outputText id="txtDeletedRoomOrderResult" value="#{landlord.deletedRoomOrderResult}" style="display:none" />
                                </div>
                            </h:form>
                        </div>
                        <!-- /.modal-content --> 
                    </div>
                    <!-- /.modal-dialog --> 
                </div>

                <!--Modal Customer Order Room Delete-->
                <div class="modal fade" id="roomCustomerOrderDelete" tabindex="-1" role="dialog" aria-labelledby="myDelete" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <h:form id="frmDeleteCustomerOrderRoomDelete" class="form-horizontal">
                                <h:inputText id="txtDeletedCustomerOrderRoomId" value="#{landlord.deletedCustomerOrderRoomOrderId}" style="display: none"/>
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title custom_align" id="Heading">Xóa thông tin Hóa Đơn</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="alert alert-warning"><span class="glyphicon glyphicon-warning-sign"></span> Bạn có chắc chắn xóa hóa đơn này?</div>
                                </div>
                                <div class="modal-footer " style="text-align: right">

                                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Hủy</button>

                                    <h:commandLink class="btn btn-primary"  >
                                        <i class="glyphicon glyphicon-ok-sign"/>
                                        Xác nhận
                                        <f:ajax execute="@form" render="pgDeleteCustomerOrderRoom txtDeletedCustomerOrderRoomResult" listener="#{landlord.deleteCustomerOrderRoom()}" onevent="deleteCustomerOrderRoomSuccess"/>
                                    </h:commandLink>
                                    <h:outputText id="txtDeletedCustomerOrderRoomResult" value="#{landlord.deletedCustomerOrderRoomResult}" style="display:none" />
                                </div>
                            </h:form>
                        </div>
                        <!-- /.modal-content --> 
                    </div>
                    <!-- /.modal-dialog --> 
                </div>

                <!--Modal Order Room View-->
                <div class="modal fade" id="roomOrderView" tabindex="-1" role="dialog" aria-labelledby="myDelete" aria-hidden="true">
                    <div class="modal-dialog" style="width: 70%">
                        <div class="modal-content">
                            <h:form id="frmRoomOrderView" class="form-horizontal">
                                <h:inputText id="txtViewRoomOrderId" value="#{landlord.deletedRoomOrderId}" style="display: none"/>
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title custom_align" id="Heading">Danh sách ngày đặt</h4>
                                </div>
                                <div class="modal-body">

                                    <table class="table table-responsive table-hover ">
                                        <thead>
                                            <tr>
                                                <th>Phòng</th>
                                                <th>Từ ngày</th>
                                                <th>Đến ngày</th>
                                                <th>Giá</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ui:repeat var="roomOrderDetail" value="#{landlord.displayOrderDetailByOrderId(15)}">
                                                <tr>
                                                    <td ><h:link outcome="#{landlord.displayRoomDetail(roomOrderDetail.accomId.accomId)}"> <img style="width:80px" class="main_image"  src="#{roomOrderDetail.accomId.images}"/></h:link></td>
                                                    <td>  <h:outputText value="#{roomOrderDetail.bookedFromDate}">
                                                            <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                                        </h:outputText>
                                                    </td>
                                                    <td> <h:outputText value="#{roomOrderDetail.bookedToDate}">
                                                            <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                                        </h:outputText>
                                                    </td>
                                                    <td class="thousandComma">#{roomOrderDetail.price}</td>
                                                </tr>
                                            </ui:repeat>
                                        </tbody>
                                    </table> 


                                </div>
                                <div class="modal-footer " style="text-align: right">
                                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Hủy</button>
                                </div>
                            </h:form>
                        </div>
                        <!-- /.modal-content --> 
                    </div>
                    <!-- /.modal-dialog --> 
                </div>

                <!--Modal room delete-->
                <div class="modal fade" id="roomDelete" tabindex="-1" role="dialog" aria-labelledby="myDelete" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <h:form id="frmDeletedAccom" class="form-horizontal">
                                <h:inputText id="txtDeletedAccomId" value="#{landlord.deletedAccomId}" style="display: none" />
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title custom_align" id="Heading">Xóa thông tin phòng</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="alert alert-warning"><span class="glyphicon glyphicon-warning-sign"></span> Bạn có chắc chắn xóa phòng này?</div>
                                </div>
                                <div class="modal-footer " style="text-align: right">

                                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Hủy</button>

                                    <h:commandLink class="btn btn-primary"  >
                                        <i class="glyphicon glyphicon-ok-sign"/>
                                        Xác nhận
                                        <f:ajax execute="@form" render="frmUpdateAccom txtDeletedRoomResult" listener="#{landlord.deleteRoom()}" onevent="deleteAccomSuccess"/>
                                    </h:commandLink>
                                    <h:outputText id="txtDeletedRoomResult" value="#{landlord.deletedRoomResult}" style="display:none" />
                                </div>
                            </h:form>
                        </div>
                        <!-- /.modal-content --> 
                    </div>
                    <!-- /.modal-dialog --> 
                </div>

                <!--Modal room edit-->
                <div class="modal fade" id="roomEdit" tabindex="-1" role="dialog" aria-labelledby="myEdit" aria-hidden="true">
                    <div class="modal-dialog" role="document" style="width: 60%;margin: auto">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="Heading">Sửa thông tin phòng</h4>
                            </div>
                            <h:form id="frmEditAccom" class="form-horizontal" enctype="multipart/form-data">

                                <div class="modal-body">
                                    <fieldset>
                                        <div class="form-group">
                                            <label for="inputName" class="col-lg-3 control-label">Tên phòng</label>
                                            <div class="col-lg-9">
                                                <h:inputText id="updateAccomName"  value="#{landlord.curAccomUpdate.accomName}" class="form-control" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="inputPrice" class="col-lg-3 control-label">Giá phòng</label>
                                            <div class="col-lg-9">
                                                <h:inputText id="updateRoomPrice" value="#{landlord.curAccomUpdate.price}" class="form-control"  />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="inputAddress" class="col-lg-3 control-label">Địa chỉ</label>
                                            <div class="col-lg-9">
                                                <h:inputText id="updateHourseNumber" value="#{landlord.houseNumber}" class="form-control"  p:placeholder="Số nhà"/>
                                                <h:inputText id="updateRoomStreet" value="#{landlord.street}"  class="form-control"  p:placeholder="Đường" />
                                                <h:inputText id="updateRoomWard"  value="#{landlord.ward}"  class="form-control"  p:placeholder="Phường"/>
                                                <h:inputText id="updateRoomDistrict" value="#{landlord.district}"  class="form-control"  p:placeholder="Quận"/>
                                                <h:inputText id="updateRoomCity" value="#{landlord.city}"  class="form-control"  p:placeholder="Thành phố" />
                                            </div>

                                        </div>

                                        <div class="form-group">
                                            <label for="textArea"  class="col-lg-3 control-label">Mô tả</label>
                                            <div class="col-lg-9">
                                                <h:inputTextarea id="updateRoomDescription" class="form-control" value="#{landlord.curAccomUpdate.description}" rows="5" />
                                                <span class="help-block">Giới thiệu tổng quan về phòng</span>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="inputBed"  class="col-lg-3 control-label">Số giường</label>
                                            <div class="col-lg-9">
                                                <h:inputText id="updateRoomNumberOfBed"  value="#{landlord.curAccomUpdate.noOfBed}" class="form-control" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="inputPerson" class="col-lg-3 control-label">Số người</label>
                                            <div class="col-lg-9">
                                                <h:inputText id="updateRoomNumOfPerson" value="#{landlord.curAccomUpdate.noOfPersons}" class="form-control" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="inputToilet" class="col-lg-3 control-label">Số toilet</label>
                                            <div class="col-lg-9">
                                                <h:inputText id="updateRoomNumToilet"  value="#{landlord.curAccomUpdate.noOfToilet}" class="form-control" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="inputImage" class="col-lg-3 control-label">Hình đại diện</label>
                                            <!--<input type="file" id="fileinput" multiple="multiple" accept="image/*" />-->
                                            <div class="col-lg-9">
                                                <h:inputFile  id="updateRoomNumThumbnail" value="#{landlord.thumbnail}" ></h:inputFile>

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="inputImage" class="col-lg-3 control-label">Hình 1</label>
                                            <div class="col-lg-9">
                                                <h:inputFile id="updateRoomNumFile1" value="#{landlord.file1}" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="inputImage" class="col-lg-3 control-label">Hình 2</label>
                                            <div class="col-lg-9">
                                                <h:inputFile id="updateRoomNumFile2" value="#{landlord.file2}" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="inputImage" class="col-lg-3 control-label">Hình 3</label>
                                            <div class="col-lg-9">
                                                <h:inputFile id="updateRoomNumFile3" value="#{landlord.file3}" />
                                            </div>
                                        </div>
                                    </fieldset>

                                </div>
                                <div class="modal-footer" style="text-align: right">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
                                    <h:commandButton action="#{landlord.editRoom()}" class="btn btn-primary" value="Sửa bài"/>
                                </div>
                            </h:form>
                        </div>
                    </div>
                </div>


                <!--require room model-->
                <div class="tab-pane fade active " id="yourRequiredRoom">
                    <legend>Danh sách đăng ký phòng</legend>
                    <f:view>
                        <h:form>
                            <h:dataTable value="#{custReq.requiresByCusID}" var="item" class="table table-responsive table-hover">
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Số đăng ký"/>
                                    </f:facet>
                                    <h:outputText value="#{item.custReqId}"/>
                                </h:column>
                                <h:column>
                                    <h:inputHidden id="hdaddress" value="#{custReq.getAddress(item.requirement)}"/>
                                    <f:facet name="header">
                                        <h:outputText value="Địa chỉ đăng ký"/>
                                    </f:facet>
                                    <h:outputText id="txtAddress" value="#{custReq.getaddress}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Bán kính"/>
                                    </f:facet>
                                    <h:outputText id="txtRadius" value="#{custReq.getrad}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Ngày đăng ký"/>
                                    </f:facet>
                                    <h:outputText value="#{item.createdDate}">
                                        <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                    </h:outputText>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Xóa"/>
                                    </f:facet>
                                    <a class="btn btn-primary" onclick="displayReqDelete(this)"  data-toggle="modal" data-target="#DeleteReq"><span class="glyphicon glyphicon-trash"></span> Xóa</a>
                                </h:column>
                            </h:dataTable>
                        </h:form>
                    </f:view>
                </div>


                <!--Delete FAQ model-->
                <div class="modal fade" id="DeleteReq" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <h:form id="frmDeleteReq" class="form-horizontal" enctype="multipart/form-data" >
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title custom_align" id="Heading">Xác nhận xóa đăng ký này</h4>
                                </div>
                                <div class="form-group">
                                    <h:inputHidden  id="hdReqIdDel" value="#{custReq.cusreqDel}"/>
                                </div>
                                <div class="modal-body">
                                    <div class="alert alert-warning"><span class="glyphicon glyphicon-warning-sign"></span> Bạn có chắc chắn xóa đăng ký này?</div>
                                </div>
                                <div class="modal-footer " style="text-align: right">

                                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Hủy</button>
                                    <h:commandButton action="#{custReq.deleteReq()}"  class="btn btn-primary" value="Xác nhận"/>
                                </div>
                            </h:form>
                        </div>
                    </div>
                </div>
            </ui:define>

        </ui:composition>

    </body>
</html>
